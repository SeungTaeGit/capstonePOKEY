<!DOCTYPE html>
<html lang="kr" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Pokey</title>
    <link rel="stylesheet" href="/css/textChat.css">
    <script defer src="/js/textChat.js"></script>
    <script defer src="/js/client.js"></script>
</head>
<body>

<div class="info">
    <p><b>UserName</b> ë‹˜..
        <button class="logout">LOGOUT</button>

        <button id="connect" class="btn btn-default" type="submit">Connect</button>
        <button id="disconnect" class="btn btn-default" type="submit" disabled="disabled">Disconnect
        </button>
    </p>

</div>

<div class="container clearfix">
    <div class="people-list" id="people-list">
        <div class="search">
            <input type="text" placeholder="search" />
            <i class="fa fa-search"></i>
        </div>
        <ul class="list">
            <li class="clearfix">
                <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/195612/chat_avatar_01.jpg" alt="avatar" />
                <div class="about">
                    <div class="name">Talk for 4th Team</div>
                    <div class="status">
                        <i class="fa fa-circle online"></i> online
                    </div>
                </div>
            </li>
        </ul>
        <nav role="navigation">
            <div id="menuToggle">
                <input type="checkbox" />

                <span></span>
                <span></span>
                <span></span>
                <ul id="menu">
                    <div class="menuroom">
                        <input class="roomin" type="text" required>
                        <label class="roomla">Room Name</label>
                        <span class="roomsp"></span>
                    </div>
                    <div class="menuroom">
                        <input class="roomin" type="text" required>
                        <label class="roomla">Room passwd</label>
                        <span class="roomsp"></span>
                    </div>
                    <button class="createroombtn" type="button">CREATE</button>
                </ul>
            </div>
        </nav>

<!--            <li class="clearfix">-->
<!--                <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/195612/chat_avatar_02.jpg" alt="avatar" />-->
<!--                <div class="about">-->
<!--                    <div class="name">Aiden Chavez</div>-->
<!--                    <div class="status">-->
<!--                        <i class="fa fa-circle offline"></i> left 7 mins ago-->
<!--                    </div>-->
<!--                </div>-->
<!--            </li>-->

<!--            <li class="clearfix">-->
<!--                <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/195612/chat_avatar_03.jpg" alt="avatar" />-->
<!--                <div class="about">-->
<!--                    <div class="name">Mike Thomas</div>-->
<!--                    <div class="status">-->
<!--                        <i class="fa fa-circle online"></i> online-->
<!--                    </div>-->
<!--                </div>-->
<!--            </li>-->

<!--            <li class="clearfix">-->
<!--                <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/195612/chat_avatar_04.jpg" alt="avatar" />-->
<!--                <div class="about">-->
<!--                    <div class="name">Erica Hughes</div>-->
<!--                    <div class="status">-->
<!--                        <i class="fa fa-circle online"></i> online-->
<!--                    </div>-->
<!--                </div>-->
<!--            </li>-->

<!--            <li class="clearfix">-->
<!--                <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/195612/chat_avatar_05.jpg" alt="avatar" />-->
<!--                <div class="about">-->
<!--                    <div class="name">Ginger Johnston</div>-->
<!--                    <div class="status">-->
<!--                        <i class="fa fa-circle online"></i> online-->
<!--                    </div>-->
<!--                </div>-->
<!--            </li>-->

<!--            <li class="clearfix">-->
<!--                <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/195612/chat_avatar_06.jpg" alt="avatar" />-->
<!--                <div class="about">-->
<!--                    <div class="name">Tracy Carpenter</div>-->
<!--                    <div class="status">-->
<!--                        <i class="fa fa-circle offline"></i> left 30 mins ago-->
<!--                    </div>-->
<!--                </div>-->
<!--            </li>-->

<!--            <li class="clearfix">-->
<!--                <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/195612/chat_avatar_07.jpg" alt="avatar" />-->
<!--                <div class="about">-->
<!--                    <div class="name">Christian Kelly</div>-->
<!--                    <div class="status">-->
<!--                        <i class="fa fa-circle offline"></i> left 10 hours ago-->
<!--                    </div>-->
<!--                </div>-->
<!--            </li>-->

<!--            <li class="clearfix">-->
<!--                <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/195612/chat_avatar_08.jpg" alt="avatar" />-->
<!--                <div class="about">-->
<!--                    <div class="name">Monica Ward</div>-->
<!--                    <div class="status">-->
<!--                        <i class="fa fa-circle online"></i> online-->
<!--                    </div>-->
<!--                </div>-->
<!--            </li>-->

<!--            <li class="clearfix">-->
<!--                <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/195612/chat_avatar_09.jpg" alt="avatar" />-->
<!--                <div class="about">-->
<!--                    <div class="name">Dean Henry</div>-->
<!--                    <div class="status">-->
<!--                        <i class="fa fa-circle offline"></i> offline since Oct 28-->
<!--                    </div>-->
<!--                </div>-->
<!--            </li>-->

<!--            <li class="clearfix">-->
<!--                <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/195612/chat_avatar_10.jpg" alt="avatar" />-->
<!--                <div class="about">-->
<!--                    <div class="name">Peyton Mckinney</div>-->
<!--                    <div class="status">-->
<!--                        <i class="fa fa-circle online"></i> online-->
<!--                    </div>-->
<!--                </div>-->
<!--            </li>-->
<!--        </ul>-->
    </div>

    <div class="video">
        <div class="video-history">

        </div>

        <div class="video-message clearfix">

            <i class="fa fa-file-o"></i> &nbsp;&nbsp;&nbsp;
            <i class="fa fa-file-image-o"></i>
        </div>

        <div class="toggle">
            <div class="togglebtn">
                <p><b>Mic On</b></p>
            </div>
            <div class="togglebtn">
                <input type="checkbox" id="togglech" hidden>
                <label for="togglech" class="toggleSwitch">
                    <span class="toggleButton"></span>
                </label>
            </div>

            <div class="togglebtn">
                <p><b>Video On</b></p>
            </div>
            <div class="togglebtn">
                <input type="checkbox" id="togglech2" hidden>
                <label for="togglech2" class="toggleSwitch blue">
                    <span class="toggleButton"></span>
                </label>
            </div>
        </div>
    </div>







    <div class="chat" id="talk">
        <div class="chat-header clearfix">
            <div class="chat-about">
                <div class="chat-with">___Chatting Room</div>
                <div class="chat-num-messages">maessages's number</div>
            </div>
            <i class="fa fa-star"></i>
        </div> <!-- end chat-header -->

        <div id="greetings" class="chat-history">
<!--            <ul>-->
<!--                <li class="clearfix">-->
<!--                    <div class="message-data align-right">-->
<!--                        <span class="message-data-time" >10:10 AM, Today</span> &nbsp; &nbsp;-->
<!--                        <span class="message-data-name" >Olia</span> <i class="fa fa-circle me"></i>-->

<!--                    </div>-->
<!--                    <div class="message other-message float-right">-->
<!--                        Hi Vincent, how are you? How is the project coming along?-->
<!--                    </div>-->
<!--                </li>-->

<!--                <li>-->
<!--                    <div class="message-data">-->
<!--                        <span class="message-data-name"><i class="fa fa-circle online"></i> Vincent</span>-->
<!--                        <span class="message-data-time">10:12 AM, Today</span>-->
<!--                    </div>-->
<!--                    <div class="message my-message">-->
<!--                        Are we meeting today? Project has been already finished and I have results to show you.-->
<!--                    </div>-->
<!--                </li>-->

<!--                <li class="clearfix">-->
<!--                    <div class="message-data align-right">-->
<!--                        <span class="message-data-time" >10:14 AM, Today</span> &nbsp; &nbsp;-->
<!--                        <span class="message-data-name" >Olia</span> <i class="fa fa-circle me"></i>-->

<!--                    </div>-->
<!--                    <div class="message other-message float-right">-->
<!--                        Well I am not sure. The rest of the team is not here yet. Maybe in an hour or so? Have you faced any problems at the last phase of the project?-->
<!--                    </div>-->
<!--                </li>-->

<!--                <li>-->
<!--                    <div class="message-data">-->
<!--                        <span class="message-data-name"><i class="fa fa-circle online"></i> Vincent</span>-->
<!--                        <span class="message-data-time">10:20 AM, Today</span>-->
<!--                    </div>-->
<!--                    <div class="message my-message">-->
<!--                        Actually everything was fine. I'm very excited to show this to our team.-->
<!--                    </div>-->
<!--                </li>-->

<!--                <li>-->
<!--                    <div class="message-data">-->
<!--                        <span class="message-data-name"><i class="fa fa-circle online"></i> Vincent</span>-->
<!--                        <span class="message-data-time">10:31 AM, Today</span>-->
<!--                    </div>-->
<!--                    <i class="fa fa-circle online"></i>-->
<!--                    <i class="fa fa-circle online" style="color: #AED2A6"></i>-->
<!--                    <i class="fa fa-circle online" style="color:#DAE9DA"></i>-->
<!--                </li>-->

<!--            </ul>-->

        </div> <!-- end chat-history -->

        <div class="chat-message clearfix">
            <form>
                <textarea name="message-to-send" id="msg" class="form-control"  placeholder ="Type your message" rows="3"></textarea>
            </form>

            <i class="fa fa-file-o"></i> &nbsp;&nbsp;&nbsp;
            <i class="fa fa-file-image-o"></i>

            <button id="send" class="btn btn-default" type="submit">Send</button>

        </div> <!-- end chat-message -->

    </div> <!-- end chat -->

</div> <!-- end container -->

<script id="message-template" type="text/x-handlebars-template">
    <li class="clearfix">
        <div class="message-data align-right">
            <span class="message-data-time" >{{time}}, Today</span> &nbsp; &nbsp;
            <span class="message-data-name" >Olia</span> <i class="fa fa-circle me"></i>
        </div>
        <div class="message other-message float-right">
            {{messageOutput}}
        </div>
    </li>
</script>

<script id="message-response-template" type="text/x-handlebars-template">
    <li>
        <div class="message-data">
            <span class="message-data-name"><i class="fa fa-circle online"></i> Vincent</span>
            <span class="message-data-time">{{time}}, Today</span>
        </div>
        <div class="message my-message">
            {{response}}
        </div>
    </li>
</script>

<script src='../js/client.js'></script>
<script>
    // SeungTae's Code
    var stompClient = null;

    function setConnected(connected) {
        $("#connect").prop("disabled", connected);
        $("#disconnect").prop("disabled", !connected);
        if (connected) {
            $("#conversation").show();
        }
        else {
            $("#conversation").hide();
        }
        $("#greetings").html("");
    }

    function connect() {
        var socket = new SockJS('/gs-guide-websocket');
        stompClient = Stomp.over(socket);
        stompClient.connect({}, function (frame) {
            setConnected(true);
            console.log('Connected: ' + frame);
            stompClient.subscribe('/topic/greetings', function (greeting) {
                showGreeting(JSON.parse(greeting.body).content);
            });
        });
    }

    function disconnect() {
        if (stompClient !== null) {
            stompClient.disconnect();
        }
        setConnected(false);
        console.log("Disconnected");
    }

    function sendName() {
        stompClient.send("/app/hello", {}, JSON.stringify({'msg': $("#name").val()}));
    }

    function showGreeting(message) {
        $("#greetings").append("<tr><td>" + message + "</td></tr>");
    }

    $(function () {
        $("form").on('submit', function (e) {
            e.preventDefault();
        });
        $( "#connect" ).click(function() { connect(); });
        $( "#disconnect" ).click(function() { disconnect(); });
        $( "#send" ).click(function() { sendName(); });
    });

</script>

</body>
</html>
